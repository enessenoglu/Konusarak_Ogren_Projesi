@using HtmlAgilityPack
@using K_O_Project.Models.Exam
@{
    ViewData["Title"] = "Home Page";
}
@model ExamInputModel

@Html.ValidationSummary(false, "", new { @class = "text-danger" })

<form method="post" enctype="application/x-www-form-urlencoded">
    <div class="row">


        <div class="form-group">
            <label for="titleList">Title Select</label>
            <select asp-for="Title" class="form-control" onchange="TextContent()" id="titleList">
            </select>

            <div class="form-group">
                <label for="contentArea">Content</label>
                <textarea asp-for="Content" class="form-control" id="contentArea" readonly rows="3"></textarea>
            </div>


        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-6">
            <div class="form-group">

                <div class="form-group">
                    <label for="soru">Soru-1</label>
                    <textarea asp-for="Questions[0].Title" class="form-control" id="soru" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="soru">A)</label>
                    <input type="hidden" asp-for="Questions[0].Options[0].OptionName" value="A" />
                    <input asp-for="Questions[0].Options[0].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">B)</label>
                    <input type="hidden" asp-for="Questions[0].Options[1].OptionName" value="B" />
                    <input asp-for="Questions[0].Options[1].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">C)</label>
                    <input type="hidden" asp-for="Questions[0].Options[2].OptionName" value="C" />
                    <input asp-for="Questions[0].Options[2].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">D)</label>
                    <input type="hidden" asp-for="Questions[0].Options[3].OptionName" value="D" />
                    <input asp-for="Questions[0].Options[3].Title" type="text" class="form-control" />
                </div>
                <label>Doğru Cevap</label>
                <select asp-for="Questions[0].SelectedAnswer" class="form-select">
                    <Option value="A">A</Option>
                    <Option value="B">B</Option>
                    <Option value="C">C</Option>
                    <Option value="D">D</Option>
                </select>
            </div>



        </div>
        <div class="col-6">
            <div class="form-group">

                <div class="form-group">
                    <label for="soru">Soru-2</label>
                    <textarea asp-for="Questions[1].Title" class="form-control" id="soru" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="soru">A)</label>
                    <input type="hidden" asp-for="Questions[1].Options[0].OptionName" value="A" />
                    <input asp-for="Questions[1].Options[0].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">B)</label>
                    <input type="hidden" asp-for="Questions[1].Options[1].OptionName" value="B" />
                    <input asp-for="Questions[1].Options[1].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">C)</label>
                    <input type="hidden" asp-for="Questions[1].Options[2].OptionName" value="C" />
                    <input asp-for="Questions[1].Options[2].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">D)</label>
                    <input type="hidden" asp-for="Questions[1].Options[3].OptionName" value="D" />
                    <input asp-for="Questions[1].Options[3].Title" type="text" class="form-control" />
                </div>
                <label>Doğru Cevap</label>
                 <select asp-for="Questions[1].SelectedAnswer" class="form-select">
                    <Option value="A">A</Option>
                    <Option value="B">B</Option>
                    <Option value="C">C</Option>
                    <Option value="D">D</Option>
                </select>
            </div>
        </div>

    </div>
    <br />

    <div class="row">
        <div class="col-6">
            <div class="form-group">

                <div class="form-group">
                    <label for="soru">Soru-3</label>
                    <textarea asp-for="Questions[2].Title" class="form-control" id="soru" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="soru">A)</label>
                    <input type="hidden" asp-for="Questions[2].Options[0].OptionName" value="A" />
                    <input asp-for="Questions[2].Options[0].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">B)</label>
                    <input type="hidden" asp-for="Questions[2].Options[1].OptionName" value="B" />
                    <input asp-for="Questions[2].Options[1].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">C)</label>
                    <input type="hidden" asp-for="Questions[2].Options[2].OptionName" value="C" />
                    <input asp-for="Questions[2].Options[2].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">D)</label>
                    <input type="hidden" asp-for="Questions[2].Options[3].OptionName" value="D" />
                    <input asp-for="Questions[2].Options[3].Title" type="text" class="form-control" />
                </div>
                <label>Doğru Cevap</label>
                <select asp-for="Questions[2].SelectedAnswer" class="form-select">
                    <Option value="A">A</Option>
                    <Option value="B">B</Option>
                    <Option value="C">C</Option>
                    <Option value="D">D</Option>
                </select>
            </div>
        </div>
        <div class="col-6">
            <div class="form-group">

                <div class="form-group">
                    <label for="soru">Soru-4</label>
                    <textarea asp-for="Questions[3].Title" class="form-control" id="soru" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="soru">A)</label>
                    <input type="hidden" asp-for="Questions[3].Options[0].OptionName" value="A" />
                    <input asp-for="Questions[3].Options[0].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">B)</label>
                    <input type="hidden" asp-for="Questions[3].Options[1].OptionName" value="B" />
                    <input asp-for="Questions[3].Options[1].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">C)</label>
                    <input type="hidden" asp-for="Questions[3].Options[2].OptionName" value="C" />
                    <input asp-for="Questions[3].Options[2].Title" type="text" class="form-control" />
                </div>
                <div class="form-group">
                    <label for="soru">D)</label>
                    <input type="hidden" asp-for="Questions[3].Options[3].OptionName" value="D" />
                    <input asp-for="Questions[3].Options[3].Title" type="text" class="form-control" />
                </div>
                <label>Doğru Cevap</label>
                <select asp-for="Questions[3].SelectedAnswer" class="form-select">
                    <Option value="A">A</Option>
                    <Option value="B">B</Option>
                    <Option value="C">C</Option>
                    <Option value="D">D</Option>
                </select>
            </div>
        </div>


    </div>
    <div class="row">
        <input type="submit" class="btn btn-primary" value="Gönder" />

    </div>
</form>


@section Scripts {

<script>


        var data = [];

    const TextContent=()=>{
         const selectedTitle =  $("#titleList").val();
         const content =data.find(x=>x.title==selectedTitle).content;
         $("#contentArea").text(content);
        }
        const getData = ()=> {
            $.get( "/Home/GetContentData", function( content ) {
                data = content;
                for(item of content){
                    let dataToAppend = `<option value="${item.title}">${item.title}</option>`;
                     $("#titleList").append(dataToAppend);
                }

                TextContent();

            });
        }

        $( document ).ready(function() {
            getData();
          });
</script>
}
